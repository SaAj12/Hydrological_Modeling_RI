<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Hydrological Modeling</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŒŠ</text></svg>">
  <link rel="stylesheet" href="vendor/leaflet/leaflet.css">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div id="api-error-banner" class="api-error-banner hidden" role="alert">
    Loading discharge data. If the map is empty, ensure <code>data/discharge_data.json</code> exists (run <code>python scripts/export_discharge_data.py</code>).
  </div>
  <div class="app">
    <header class="header">
      <h1>Hydrological Modeling</h1>
      <p class="subtitle">Data at USGS and NOAA monitoring stations â€” click a station on the map or select from the list to view time series</p>
      <div class="search-bar">
        <label>USGS stations:</label>
        <select id="discharge-select">
          <option value="">â€” select station â€”</option>
        </select>
        <label>NOAA stations:</label>
        <select id="noaa-select">
          <option value="">â€” select station â€”</option>
        </select>
      </div>
    </header>

    <main class="main">
      <aside class="panel">
        <div id="panel-placeholder" class="placeholder">
          Click a station on the map or select from the dropdown to view discharge time series.
        </div>
        <div id="panel-content" class="content hidden">
          <h2 id="point-title">Station</h2>
          <p id="point-meta" class="meta"></p>
          <div class="charts">
            <div id="discharge-chart-wrap" class="chart-wrap">
              <h3>Discharge (cfs, Cubic feet per second)</h3>
              <canvas id="chart-discharge"></canvas>
            </div>
            <div id="vtec-figure-wrap" class="chart-wrap vtec-wrap hidden">
              <h3>NWS watch / warning / advisory (VTEC)</h3>
              <img id="vtec-figure" src="" alt="VTEC timeline" class="vtec-img" />
              <p id="vtec-no-data" class="vtec-no-data hidden">No VTEC data for this station.</p>
            </div>
            <div id="water-level-wrap" class="chart-wrap vtec-wrap hidden">
              <h3>NOAA water level</h3>
              <img id="water-level-figure" src="" alt="Water level time series" class="vtec-img" />
              <p id="water-level-no-data" class="vtec-no-data hidden">No water level data available.</p>
            </div>
            <div id="precipitation-wrap" class="chart-wrap vtec-wrap hidden">
              <h3>Precipitation (GPM IMERG)</h3>
              <img id="precipitation-figure" src="" alt="Precipitation time series" class="vtec-img" />
              <p id="precipitation-no-data" class="vtec-no-data hidden">No precipitation data available.</p>
            </div>
          </div>
        </div>
      </aside>
      <div id="map" class="map"></div>
    </main>

    <footer class="footer">
      Brown University - DEEP Department
    </footer>
  </div>

  <script src="vendor/leaflet/leaflet.js"></script>
  <script src="vendor/chart/chart.umd.min.js"></script>
  <script src="vendor/chart/chartjs-adapter-date-fns.bundle.min.js"></script>
  <script src="js/config.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
